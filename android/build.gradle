import java.nio.file.Files
import java.nio.file.Paths

dependencies {
    api fileTree(dir: "libs", include: ['*.jar'])
}

afterEvaluate {
    def task = project.tasks.create(name: "replace_aar") {
        doLast {
            def from = "${project.projectDir}/android-9.0.0_r41.aar"
            def des = "${project.buildDir}/outputs/aar/android-release.aar"
            println "replace_aar : ${from}"
            Files.deleteIfExists(Paths.get(des))
            Files.copy(Paths.get(from), Paths.get(des))
        }
    }

    project.tasks.findByPath("uploadArchives").dependsOn task
}
